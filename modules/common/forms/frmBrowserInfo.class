
<?php
/* Copyright 2006, 2007, 2008, 2009, 2010 do SETEC/MEC
 *
 * Este arquivo é parte do programa SigaEPT
 *
 * O SigaEPT é um software livre;  você pode redistribuí-lo e/ou modificá-lo dentro dos
 * termos da Licença Pública Geral GNU como publicada pela fundação do software livre (FSF);
 * na versão 2 da Licença.
 *
 * Este programa é distribuído na esperança que possa ser útil, mas SEM NENHUMA GARANTIA; sem
 * uma garantia implícita de ADEQUAÇÃO a qualquer MERCADO ou APLICAÇÃO EM PARTICULAR. Veja Licença
 * Pública Geral GNU/GPL em português para maiores detalhes.
 *
 * Você deve ter recebido uma cópia da Licença Pública Geral GNU, sob o título “LICENCA.txt”,
 * junto com este programa, se não, acesse o portal do Software Público Brasileiro no endereço
 * www.softwarepublico.gov.br ou escreva para Fundação do Software Livre (FSF) Inc.,51 Franklin
 * St, Fifth Floor, Boston, MA 02110-1301, USA
 */
?>

<?
class FrmBrowserInfo extends Form
{

	function FrmBrowserInfo()
    {   global $MIOLO, $module, $self;

		$this->Form('Informações sobre o browser');
        $this->AddJsCode($this->doBrowserInfo());
        $this->OnSubmit('doBrowserInfo()');
	}

    function CreateFields()
	{  global $MIOLO, $action;

       $fields = Array(
           array(
             new Text('','Resolução atual:   '),
             new TextField('fwidth','','',4),
             new Text('','X'),
             new TextField('fheight','','',4),
           ),
           new TextField('fnavigator','','Browser',40),
           array(
             new Text('','Resolução máximal:   '),
             new TextField('fmaxwidth','','',4),
             new Text('','X'),
             new TextField('fmaxheight','','',4),
           ),
           new TextField('fversion','','Versão',40),
           array(
             new Text('','Cor de resolução:   '),
             new TextField('fcolordepth','','',2),
             new Text('','bit'),
           ),
           new TextField('fcodename','','Nome',20),
           new TextField('fplatform','','Plataforma',20),
           new TextField('fcolor','','Cores',10),
           new TextField('fjava','','Java ativado',3),
           new TextField('ffonts','','Fontes aa',3),
           new TextField('fDHTML','','DHTML',3),
           new TextField('fLayers','','Layers',15)
       );
	   $this->SetFields($fields);
       $buttons = Array(
           new FormButton('btnPost', 'Enviar'),
       );

	   $this->SetButtons($buttons);
	}

    function doBrowserInfo()
    {
       $code = "function doBrowserInfo() { 
".
               "  var form = document." . $this->name . ";
". 
               "  window.onerror=null;
".
               "  colors = window.screen.colorDepth;
".
               "  form.frm_fcolor.value = Math.pow (2, colors);
".
               "  if (window.screen.fontSmoothingEnabled == true)
".
               "  form.frm_ffonts.value = \"Yes\";
".
               "  else form.frm_ffonts.value = \"No\";
".
               "  form.frm_fnavigator.value = navigator.appName;
".
               "  form.frm_fversion.value = navigator.appVersion;
".
               "  form.frm_fcolordepth.value = window.screen.colorDepth;
".
               "  form.frm_fwidth.value = window.screen.width;
".
               "  form.frm_fheight.value = window.screen.height;
".
               "  form.frm_fmaxwidth.value = window.screen.availWidth;
".
               "  form.frm_fmaxheight.value = window.screen.availHeight;
".
               "  form.frm_fcodename.value = navigator.appCodeName;
".
               "  form.frm_fplatform.value = navigator.platform;
".
               "  if (navigator.javaEnabled() < 1) form.frm_fjava.value=\"No\";
".
               "  if (navigator.javaEnabled() == 1) form.frm_fjava.value=\"Yes\";
".
               "  if(navigator.javaEnabled() && (navigator.appName != \"Microsoft Internet Explorer\")) {
".
               "    vartool=java.awt.Toolkit.getDefaultToolkit();
".
               "    addr=java.net.InetAddress.getLocalHost();
".
               "    host=addr.getHostName();
".
               "    ip=addr.getHostAddress();
".
               "    alert(\"Your host name is '\" + host + \"'\nYour IP address is \" + ip); 
".
               "  }
".
               "  var isDHTML = 0;
".
               "  var isLayers = 0;
".
               "  var isAll = 0;
".
               "  var isID = 0;
".
               "  if (document.getElementById) {
".
               "     isID = 1; isDHTML = 1;
".
               "  } else {
".
               "	browserVersion = parseInt(navigator.appVersion);
".
               "	if ((navigator.appName.indexOf('Netscape') != -1) && (browserVersion == 4)) {
".
               "		isLayers = 1; isDHTML = 1;
".
               "	} else {
".
               "		if (document.all) {
".
               "			isAll = 1; isDHTML = 1;
".
               "		}
".
               "	}
".
               "  }
".
               "  if (isDHTML == 1)
".
               "  form.frm_fDHTML.value = \"Yes\";
".
               "  else form.frm_fDHTML.value = \"No\";
".
               "  if (isID == 1) form.frm_fLayers.value = \"ID\";
".
               "  if (isLayers == 1) form.frm_fLayers.value = \"Layers\";
".
               "  if (isAll == 1) form.frm_fLayers.value = \"All\";
".
               "  return true;
".
               "}
";
       return $code;
    }

}

?>
