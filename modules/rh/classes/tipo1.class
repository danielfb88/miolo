<?PHP
/* Copyright 2006, 2007, 2008, 2009, 2010 do SETEC/MEC
 *
 * Este arquivo é parte do programa SigaEPT
 *
 * O SigaEPT é um software livre;  você pode redistribuí-lo e/ou modificá-lo dentro dos
 * termos da Licença Pública Geral GNU como publicada pela fundação do software livre (FSF);
 * na versão 2 da Licença.
 *
 * Este programa é distribuído na esperança que possa ser útil, mas SEM NENHUMA GARANTIA; sem
 * uma garantia implícita de ADEQUAÇÃO a qualquer MERCADO ou APLICAÇÃO EM PARTICULAR. Veja Licença
 * Pública Geral GNU/GPL em português para maiores detalhes.
 *
 * Você deve ter recebido uma cópia da Licença Pública Geral GNU, sob o título “LICENCA.txt”,
 * junto com este programa, se não, acesse o portal do Software Público Brasileiro no endereço
 * www.softwarepublico.gov.br ou escreva para Fundação do Software Livre (FSF) Inc.,51 Franklin
 * St, Fifth Floor, Boston, MA 02110-1301, USA
 */

class BusinessRHtipo1 extends MBusiness
{
	public $siape;

    function __construct($data=NULL)
    {
        parent::__construct ('sigaept' , $data);
    } // __construct

    function OnCreate($data)
    {
        if (empty($data))
        {
//            $this->initialize();
        }
        else
        {
            $this->GetById($data);
        }
    }


    function GetById($siape)
    {
	$this->siape = $siape;
	$this->retrieve();
	return $this;
    }


    function listbyAnoMes($anomes)
    {
        $criteria = $this->getCriteria();

        /*$criteria->addColumnAttribute('siape'          );
        $criteria->addColumnAttribute('dv_matricula'   );
        $criteria->addColumnAttribute('tipo_registro'  );
        $criteria->addColumnAttribute('sigla_uf'       );
        $criteria->addColumnAttribute('nome_servidor'  );
        $criteria->addColumnAttribute('cpf'            );
        $criteria->addColumnAttribute('pis_pasep'      );
        $criteria->addColumnAttribute('nome_mae'       );
        $criteria->addColumnAttribute('sexo'           );
        $criteria->addColumnAttribute('dt_nascimento'  );
        $criteria->addColumnAttribute('estado_civil'   );
        $criteria->addColumnAttribute('escolaridade'   );
        $criteria->addColumnAttribute('titulacao'      );
        $criteria->addColumnAttribute('nacionalidade'  );
        $criteria->addColumnAttribute('naturalidade'   );
        $criteria->addColumnAttribute('pais'           );
        $criteria->addColumnAttribute('ano_chegada'    );
        $criteria->addColumnAttribute('quant_dep_ir'   );
        $criteria->addColumnAttribute('quant_dep_sf'   );
        $criteria->addColumnAttribute('dt_prim_emp'    );
        $criteria->addColumnAttribute('identif_origem' );
        $criteria->addColumnAttribute('end_logradouro' );
        $criteria->addColumnAttribute('end_numero'     );
        $criteria->addColumnAttribute('end_complemento');
        $criteria->addColumnAttribute('end_bairro'     );
        $criteria->addColumnAttribute('end_municipio'  );
        $criteria->addColumnAttribute('end_cep'        );
        $criteria->addColumnAttribute('end_uf'         );
        $criteria->addColumnAttribute('rg_numero'      );
        $criteria->addColumnAttribute('rg_orgao'       );
        $criteria->addColumnAttribute('rg_dt_emissao'  );
        $criteria->addColumnAttribute('rg_uf'          );
        $criteria->addColumnAttribute('tit_eleitor'    );*/

        $criteria->addCriteria('anomes'    ,'=',"'$anomes'"    );
        return $criteria->retrieveAsQuery();
    } // listbyAnoMes


    function listAllAnomes($anomes)//, $siape)
    {
        $criteria = $this->getCriteria();
        $criteria->addCriteria('anomes'    ,'=',"'$anomes'"    );
        //$criteria->addCriteria('siape'    ,'=',"'$siape'"    );
        return $criteria->retrieveAsQuery();
	
    }

    function listAllSiape($anomes)
    {
	$sql = new sql("siape from rh_tipo1 where anomes='$anomes'");
	$query = $this->Query($sql);
	return $query->result;
    }

    function listPartAnomes($anomes, $x)
    {
	$sql = new sql("* from rh_tipo1 where anomes='$anomes' limit 10 offset '$x'");
	$query = $this->Query($sql);
	return $query;
    }

    function total($anomes)
    {
	$sql = new sql("count(siape) from rh_tipo1 where anomes='$anomes'");
	$query = $this->Query($sql);
	return $query->result[0][0];
    }

}
?>
