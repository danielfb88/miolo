
<?php
/* Copyright 2006, 2007, 2008, 2009, 2010 do SETEC/MEC
 *
 * Este arquivo é parte do programa SigaEPT
 *
 * O SigaEPT é um software livre;  você pode redistribuí-lo e/ou modificá-lo dentro dos
 * termos da Licença Pública Geral GNU como publicada pela fundação do software livre (FSF);
 * na versão 2 da Licença.
 *
 * Este programa é distribuído na esperança que possa ser útil, mas SEM NENHUMA GARANTIA; sem
 * uma garantia implícita de ADEQUAÇÃO a qualquer MERCADO ou APLICAÇÃO EM PARTICULAR. Veja Licença
 * Pública Geral GNU/GPL em português para maiores detalhes.
 *
 * Você deve ter recebido uma cópia da Licença Pública Geral GNU, sob o título “LICENCA.txt”,
 * junto com este programa, se não, acesse o portal do Software Público Brasileiro no endereço
 * www.softwarepublico.gov.br ou escreva para Fundação do Software Livre (FSF) Inc.,51 Franklin
 * St, Fifth Floor, Boston, MA 02110-1301, USA
 */
?>

<?
class lstOrdenadorDespesa extends Grid
{
	var $listURL;

	function lstOrdenadorDespesa()
	{
		global $MIOLO, $module, $page, $context, $self, $action, $perms;
		
	    $this->listURL = $MIOLO->GetActionURL($module,$self);
	    $login = $MIOLO->GetLogin();
		$usuario = $MIOLO->GetBusiness('common','usuario');
		$usuario->GetById($login->idkey);
		$idsetor = $usuario->GetSetorProvimento();
		$setor = $MIOLO->GetBusiness('common','setor');
		$setor->GetById($idsetor);		

		$objRequisicao = $MIOLO->GetBusiness('adm','requisicao');
        	$qryRequisicao = $objRequisicao->ListByOrdenador();

		$columns = array(
			   new GridColumn('Número','center', true, '20%',true),
			   new GridColumn('Data','center', true, '25%',true),
			   new GridColumn('Setor','center', true, '30%',true),
			   new GridColumn('Status','center', true, '40%',true),
			   new GridColumn('idrequisicao','center', true, '1%',false)
			);
		
		parent::__construct($qryRequisicao->result, $columns, $this->listURL,15,0);
		$this->SetTitle('Relação de Requisições para o Ordenador de Despesas');
		$href_edit = $MIOLO->GetActionURL('adm','main:itensOrdenador','%4%');
		$this->AddActionText('alt','Atender',$href_edit);
	}
}
?>
