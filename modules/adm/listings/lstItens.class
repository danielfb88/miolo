
<?php
/* Copyright 2006, 2007, 2008, 2009, 2010 do SETEC/MEC
 *
 * Este arquivo é parte do programa SigaEPT
 *
 * O SigaEPT é um software livre;  você pode redistribuí-lo e/ou modificá-lo dentro dos
 * termos da Licença Pública Geral GNU como publicada pela fundação do software livre (FSF);
 * na versão 2 da Licença.
 *
 * Este programa é distribuído na esperança que possa ser útil, mas SEM NENHUMA GARANTIA; sem
 * uma garantia implícita de ADEQUAÇÃO a qualquer MERCADO ou APLICAÇÃO EM PARTICULAR. Veja Licença
 * Pública Geral GNU/GPL em português para maiores detalhes.
 *
 * Você deve ter recebido uma cópia da Licença Pública Geral GNU, sob o título “LICENCA.txt”,
 * junto com este programa, se não, acesse o portal do Software Público Brasileiro no endereço
 * www.softwarepublico.gov.br ou escreva para Fundação do Software Livre (FSF) Inc.,51 Franklin
 * St, Fifth Floor, Boston, MA 02110-1301, USA
 */
?>

<?
class lstItens extends Grid
{
	function lstItens()
	{
		global $MIOLO, $module, $page, $context, $self, $action, $perms, $item, $state;

		// controle dentro do grid
	        $objItem = $MIOLO->GetBusiness('adm','item');
        	$qryItem = $objItem->ListItensByIdRequisicao();
		$quantitem = new TextField('quantidade','','Quantidade',10);	

		// link dentro do grid
		$href_trans = $MIOLO->GetActionURL('common','main:admin:transaction','#0#', array('event'=>'btnEdit:click'));

		// colunas
	        $columns = array(
        	   new GridColumn('Id','right', true, '',false),
	           new GridColumn('Item','left',false,'40%',true),
	           new GridColumn('Qtd. Pedida', 'center', true,'20%',true,'',false,true),
		   new GridColumn('Qtd. Disp.', 'center', true,'20%',true,'',false,true),
		   new GridControl($quantitem,'Qtd. Atendida', 'center', true, '20%',true,'',false,true)
        	);

		// instancia o grid
		$href_grid = $MIOLO->GetActionURL($module,$self);
	        $oTransacao = $MIOLO->GetBusiness('common','transacao');
        	$query = $oTransacao->ListAll();
	        parent::__construct($qryItem->result, $columns, $href_grid,15,0);

		// Qual a coluna que serve de indice do grid
        	$this->SetIndex(0);

		// Titulo do box
		$this->SetTitle('Relação de Itens da Requisição');

		// Método a ser executado antes de renderizar cada linha
	        $this->SetRowMethod('lstGrid3','MyRowMethod');

		// Executa os eventos
	        $this->EventHandler(); 
	}
}

?>
