<?php
    class ThemeEptTheme extends MTheme
    {
        function __construct()
        {
            parent::__construct('epttheme');
        }

        function init()
        {
            $ui = $this->manager->GetUI();
            $logo_siga = $ui->getImageTheme($this->id, $this->manager->getConf('theme.logo'));
            $aTop = array(
                new MTextHeader('', '1', $this->manager->getConf('theme.company')),
                new MTextHeader('', '2', $this->manager->getConf('theme.system'))
            );

            $img = new MImageLink('', 'Home', $this->manager->getConf('home.url'), $logo_siga);//logo
            $img->image->addAttribute('width', '181');
            $img->image->addAttribute('height', '43');
            $top = array(
                new MDiv('', $img, 'logo'),
                new MDiv('', $img1, 'text' )
            );
            $this->setElement('top', $top, 'm-container-top');//div topo

            $this->setElement('navigation', new MNavigationBar(), 'm-container-topmenu');
        }

        function generate()
        {
            $method = "generate" . $this->layout;
            return $this->$method();
        }

        function generateDefault()
        {
            $this->setElement('bottom', new MStatusBar(), 'm-container-bottom');//botom
            $this->setElementId('module', 'm-container-module');//container para modulos
            $optionMenu = $this->manager->getConf('options.mainmenu');
            $idMenu = ($optionMenu == 2) ? 'm-container-dhtmlmenu' : 'm-container-menu';
            $this->setElementId('menus', $idMenu);
           

            $idContent = ($optionMenu == 2) ? 'm-container-content-full' : 'm-container-content';
            
	    $this->SetElementId('content', $idContent);

            
	    // html

            $html = $this->GenerateElement('top');

            if ($this->getElement('module') != NULL)
            {
                $html .= $this->generateElement('module');
            }

            if ($this->GetElement('navigation')->hasOptions())
            {
                $html .= $this->generateElement('navigation');
            }
	      if ($this->hasMenuOptions())
            {
                $html .= $this->generateElement('menus');
            }
	    
            $html .= $this->generateElement('content');
            $html .= $this->generateElement('bottom');

            return $this->painter->div(new MDiv('m-container', $html));
        }

        function generateLookup()
        {
            $html = $this->generateElement('content');
            $div = new MDiv('m-container', $html);
            $div->addStyle('width', '100%');
            return $this->painter->generateToString($div);
        }



        function generateHtmlArea()
        {

	    
            // module
            $this->setElementId('module', 'm-container-module');
            // content
            $this->setElementId('content', 'm-htmlarea');
            // bottom
            $this->setElement('bottom', new MStatusBar(), 'm-container-bottom');

            $html = $this->generateElement('top');

            if ($this->getElement('module') != NULL)
            {
                $html .= $this->generateElement('module');
            }

            if ($this->getElement('navigation')->hasOptions())
            {
                $html .= $this->generateElement('navigation');
            }

            $html .= $this->generateElement('content');
            $html .= $this->generateElement('bottom');
            return $this->painter->div(new MDiv('m-container', $html));
        }

        function generatePopup()
        {
            $page = $this->manager->getPage();
            $this->SetElementId('content', 'm-container-content-popup');
            $html = $this->generateElement('content');
            $divContainer = new MDiv('', $html,  'm-container');
            $divContainer->addStyle('width', '100%');
            return $this->painter->generateToString($divContainer);
        }

        function generatePrint()
        {
            $this->generateDefault();
        }

        function generateDOMPdf()
        {
            // only 'content' element
            $html = $this->generateElement('content');
            $div = new MDiv('m-container', $html);
            $div->addStyle('width', '100%');
            return $this->painter->generateToString($div);
        }

    }
?>
